"use strict";(self.webpackChunkgatitobook=self.webpackChunkgatitobook||[]).push([[942],{5942:(P,v,s)=>{s.r(v),s.d(v,{HomeModule:()=>G});var N=s(3116),g=s(6019),i=s(7537),l=s(6217),o=s(3556);let C=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-home"]],decls:6,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-6"],["src","assets/img/home.jpg","alt","Imagem do gato",1,"img-fluid","d-none","d-sm-block"]],template:function(n,t){1&n&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o._UZ(3,"img",3),o.qZA(),o.TgZ(4,"div",2),o._UZ(5,"router-outlet"),o.qZA(),o.qZA(),o.qZA())},directives:[l.lC],styles:[""]}),e})();var _=s(7384),d=s(8260),f=s(4522),F=s(5400);const T=d.N.API;let J=(()=>{class e{constructor(n,t){this.httpClient=n,this.usuarioService=t}autenticar(n,t){return this.httpClient.post(T+"/user/login",{userName:n,password:t},{observe:"response"}).pipe((0,_.b)(u=>{var a;const m=null!==(a=u.headers.get("x-access-token"))&&void 0!==a?a:"";this.usuarioService.salvaToken(m)}))}}return e.\u0275fac=function(n){return new(n||e)(o.LFG(f.eN),o.LFG(F.i))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var h=s(2847);function A(e,r){1&e&&o._UZ(0,"app-mensagem",12)}function S(e,r){1&e&&o._UZ(0,"app-mensagem",13)}const y=function(){return["novousuario"]};let I=(()=>{class e{constructor(n,t){this.authService=n,this.router=t,this.usuario="",this.senha=""}ngOnInit(){}login(){this.authService.autenticar(this.usuario,this.senha).subscribe(()=>{this.router.navigate(["animais"])},n=>{alert("Usuario ou senha invalido"),console.log(n)})}}return e.\u0275fac=function(n){return new(n||e)(o.Y36(J),o.Y36(l.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-login"]],decls:18,vars:7,consts:[[1,"text-center"],[1,"form","mt-4",3,"ngSubmit"],["loginForm","ngForm"],[1,"form-group"],["type","text","placeholder","Nome do usu\xe1rio","name","usuario","required","",1,"form-control",3,"ngModel","ngModelChange"],["campoUsuario","ngModel"],["mensagem","Usu\xe1rio obrigat\xf3rio",4,"ngIf"],["type","password","placeholder","Senha","name","senha","required","",1,"form-control",3,"ngModel","ngModelChange"],["campoSenha","ngModel"],["mensagem","Senha obrigat\xf3ria",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[3,"routerLink"],["mensagem","Usu\xe1rio obrigat\xf3rio"],["mensagem","Senha obrigat\xf3ria"]],template:function(n,t){if(1&n&&(o.TgZ(0,"h4",0),o._uU(1,"Login"),o.qZA(),o.TgZ(2,"form",1,2),o.NdJ("ngSubmit",function(){return t.login()}),o.TgZ(4,"div",3),o.TgZ(5,"input",4,5),o.NdJ("ngModelChange",function(a){return t.usuario=a}),o.qZA(),o.YNc(7,A,1,0,"app-mensagem",6),o.qZA(),o.TgZ(8,"div",3),o.TgZ(9,"input",7,8),o.NdJ("ngModelChange",function(a){return t.senha=a}),o.qZA(),o.YNc(11,S,1,0,"app-mensagem",9),o.qZA(),o.TgZ(12,"button",10),o._uU(13," Login "),o.qZA(),o.qZA(),o.TgZ(14,"p"),o._uU(15,"N\xe3o \xe9 um usuario? "),o.TgZ(16,"a",11),o._uU(17,"Se cadastre!"),o.qZA(),o.qZA()),2&n){const u=o.MAs(3),a=o.MAs(6),m=o.MAs(10);o.xp6(5),o.Q6J("ngModel",t.usuario),o.xp6(2),o.Q6J("ngIf",a.invalid&&a.touched),o.xp6(2),o.Q6J("ngModel",t.senha),o.xp6(2),o.Q6J("ngIf",m.invalid&&a.touched),o.xp6(1),o.Q6J("disabled",u.invalid),o.xp6(4),o.Q6J("routerLink",o.DdM(6,y))}},directives:[i._Y,i.JL,i.F,i.Fj,i.Q7,i.JJ,i.On,g.O5,l.yS,h.c],styles:[""]}),e})();function x(e){const r=e.value;return r!==r.toLowerCase()?{minusculo:!0}:null}function E(e){var r,n,t,u;const a=null!==(n=null===(r=e.get("userName"))||void 0===r?void 0:r.value)&&void 0!==n?n:"",m=null!==(u=null===(t=e.get("password"))||void 0===t?void 0:t.value)&&void 0!==u?u:"";return a.trim()+m.trim()?a!==m?null:{senhaIgualUsuario:!0}:null}const U=d.N.API;let Z=(()=>{class e{constructor(n){this.httpClient=n}cadastraNovoUsuario(n){return this.httpClient.post(U+"/user/signup",n)}verificaUsuarioExistente(n){return this.httpClient.get(U+`/user/exists/${n}`)}}return e.\u0275fac=function(n){return new(n||e)(o.LFG(f.eN))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var M=s(3067),Q=s(4753),L=s(6047);let b=(()=>{class e{constructor(n){this.novoUsuarioService=n}usuarioJaExiste(){return n=>n.valueChanges.pipe((0,M.w)(t=>this.novoUsuarioService.verificaUsuarioExistente(t)),(0,Q.U)(t=>t?{usuarioExistente:!0}:null),(0,L.P)())}}return e.\u0275fac=function(n){return new(n||e)(o.LFG(Z))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Y(e,r){1&e&&o._UZ(0,"app-mensagem",10),2&e&&o.Q6J("mensagem","Email obrigat\xf3rio.")}function q(e,r){1&e&&o._UZ(0,"app-mensagem",10),2&e&&o.Q6J("mensagem","Email no formato inv\xe1lido.")}function H(e,r){1&e&&o._UZ(0,"app-mensagem",10),2&e&&o.Q6J("mensagem","Nome no formato inv\xe1lido.")}function k(e,r){1&e&&o._UZ(0,"app-mensagem",10),2&e&&o.Q6J("mensagem","Usuario deve ser em caracteres min\xfaculos")}function w(e,r){1&e&&o._UZ(0,"app-mensagem",10),2&e&&o.Q6J("mensagem","Usuario j\xe1 existe.")}function j(e,r){1&e&&o._UZ(0,"app-mensagem",10),2&e&&o.Q6J("mensagem","Senha deve ser diferente do usu\xe1rio")}const z=function(){return[""]},B=[{path:"",component:C,children:[{path:"",component:I},{path:"novousuario",component:(()=>{class e{constructor(n,t,u,a){this.formBuilder=n,this.novoUsuarioService=t,this.usuarioExisteService=u,this.router=a}ngOnInit(){this.novoUsuarioForm=this.formBuilder.group({email:["",[i.kI.required,i.kI.email]],fullName:["",[i.kI.required,i.kI.minLength(4)]],userName:["",[x],[this.usuarioExisteService.usuarioJaExiste()]],password:[""]},{validators:[E]})}cadastrar(){if(this.novoUsuarioForm.valid){const n=this.novoUsuarioForm.getRawValue();this.novoUsuarioService.cadastraNovoUsuario(n).subscribe(()=>{this.router.navigate([""])},t=>{console.log(t)})}}}return e.\u0275fac=function(n){return new(n||e)(o.Y36(i.qu),o.Y36(Z),o.Y36(b),o.Y36(l.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-novo-usuario"]],decls:24,vars:13,consts:[[1,"text-center"],[1,"form","mt-4",3,"formGroup","submit"],[1,"form-group"],["type","text","placeholder","e-mail",1,"form-control",3,"formControlName"],[3,"mensagem",4,"ngIf"],["type","text","placeholder","Nome completo",1,"form-control",3,"formControlName"],["type","text","placeholder","Usu\xe1rio",1,"form-control",3,"formControlName"],["type","password","placeholder","Senha",1,"form-control",3,"formControlName"],["type","submit",1,"btn","btn-primary","btn-block"],[3,"routerLink"],[3,"mensagem"]],template:function(n,t){if(1&n&&(o.TgZ(0,"h4",0),o._uU(1,"Registre-se e mostre seu pet ao mundo!"),o.qZA(),o.TgZ(2,"form",1),o.NdJ("submit",function(){return t.cadastrar()}),o.TgZ(3,"div",2),o._UZ(4,"input",3),o.YNc(5,Y,1,1,"app-mensagem",4),o.YNc(6,q,1,1,"app-mensagem",4),o.qZA(),o.TgZ(7,"div",2),o._UZ(8,"input",5),o.YNc(9,H,1,1,"app-mensagem",4),o.qZA(),o.TgZ(10,"div",2),o._UZ(11,"input",6),o.YNc(12,k,1,1,"app-mensagem",4),o.YNc(13,w,1,1,"app-mensagem",4),o.qZA(),o.TgZ(14,"div",2),o._UZ(15,"input",7),o.qZA(),o.YNc(16,j,1,1,"app-mensagem",4),o.TgZ(17,"div"),o.TgZ(18,"button",8),o._uU(19,"Cadastro"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(20,"p"),o._uU(21,"J\xe1 \xe9 um usuario? "),o.TgZ(22,"a",9),o._uU(23,"Fa\xe7a Login!"),o.qZA(),o.qZA()),2&n){let u,a,m,p,c;o.xp6(2),o.Q6J("formGroup",t.novoUsuarioForm),o.xp6(2),o.Q6J("formControlName","email"),o.xp6(1),o.Q6J("ngIf",(null==(u=t.novoUsuarioForm.get("email"))||null==u.errors?null:u.errors.required)&&(null==(u=t.novoUsuarioForm.get("email"))?null:u.touched)),o.xp6(1),o.Q6J("ngIf",(null==(a=t.novoUsuarioForm.get("email"))||null==a.errors?null:a.errors.email)&&(null==(a=t.novoUsuarioForm.get("email"))?null:a.touched)),o.xp6(2),o.Q6J("formControlName","fullName"),o.xp6(1),o.Q6J("ngIf",(null==(m=t.novoUsuarioForm.get("fullName"))?null:m.errors)&&(null==(m=t.novoUsuarioForm.get("fullName"))?null:m.touched)),o.xp6(2),o.Q6J("formControlName","userName"),o.xp6(1),o.Q6J("ngIf",(null==(p=t.novoUsuarioForm.get("userName"))||null==p.errors?null:p.errors.minusculo)&&(null==(p=t.novoUsuarioForm.get("userName"))?null:p.touched)),o.xp6(1),o.Q6J("ngIf",(null==(c=t.novoUsuarioForm.get("userName"))||null==c.errors?null:c.errors.usuarioExistente)&&(null==(c=t.novoUsuarioForm.get("userName"))?null:c.touched)),o.xp6(2),o.Q6J("formControlName","password"),o.xp6(1),o.Q6J("ngIf",null==t.novoUsuarioForm||null==t.novoUsuarioForm.errors?null:t.novoUsuarioForm.errors.senhaIgualUsuario),o.xp6(6),o.Q6J("routerLink",o.DdM(12,z))}},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,g.O5,l.yS,h.c],styles:[""]}),e})()}]}];let O=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[l.Bz.forChild(B)],l.Bz]}),e})(),G=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[g.ez,O,i.u5,N.m]]}),e})()}}]);